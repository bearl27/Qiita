---
title: 【初心者がDDDを理解するまでpart1】ドメイン駆動設計とは？
tags:
  - 初心者
  - DDD
  - ドメイン駆動設計
  - アーキテクチャ
private: false
updated_at: '2024-12-22T05:36:13+09:00'
id: 0563e2a021ccf88ac23e
organization_url_name: rits-rcc
slide: false
ignorePublish: false
---
# はじめに
今回は、ソフトウェア開発の設計手法として注目されているドメイン駆動設計（DDD: Domain-Driven Design)について、学んだことをまとめました。シリーズの第1回目となる本記事では、ドメイン駆動設計が生まれる前の従来の設計手法から、なぜDDDが必要となったのか、その背景と基本的な考え方をご紹介します。

## **1. ドメイン駆動設計が誕生以前の考え方**

### **1.1 従来のソフトウェア設計手法**

ソフトウェア開発はこれまで、主に以下のような設計手法が用いられてきました。

- **機能分割型設計（機能主導型）**：
  - システムを機能ごとに分割し、それぞれの機能を個別に実装する方法。
  - 画面設計やデータ処理ロジックを中心に開発が進められる。
- **データ駆動型設計（データ主導型）**：
  - データベースのスキーマを最初に設計し、そのデータ構造に基づいてアプリケーションを組み立てる方法。
  - データの永続化や取得を重視。

### **1.2 従来の設計手法の問題点**

しかし、これらの設計手法には次のような問題点がありました。

1. **ビジネス要件との乖離**：
   - システムの設計が技術的な観点に偏り、ビジネスの目的やドメイン知識が十分に反映されない。
   - 結果として、ビジネスの変化に柔軟に対応できないシステムになりがち。
2. **複雑性の増大**：
   - 機能やデータを中心に設計すると、システム全体の関係性が複雑化。
   - コードの再利用性や保守性が低下。
3. **コミュニケーションの断絶**：
   - 開発者とビジネス担当者との間で共通言語がなく、要件の誤解や伝達ミスが発生しやすい。

## **2. ドメイン駆動設計の誕生**

### **2.1 ドメイン駆動設計の登場背景**

これらの課題を解決するために、2003年にエリック・エヴァンス氏が著書『**ドメイン駆動設計~エンタープライズアプリケーション開発のための思想と実装**』を発表しました。ここで提唱されたのが**ドメイン駆動設計（DDD）**です。

### **2.2 ドメイン駆動設計の目的**

ドメイン駆動設計の主な目的は、**ビジネスの本質（ドメイン）を深く理解し、それをソフトウェアに適切に反映させること**です。これにより、ビジネス要件の変化に柔軟に対応でき、長期的に価値を提供できるシステムを構築することを目指しています。

## **3. ドメイン駆動設計とは？**

### **3.1 ドメインとは何か**

まず、**「ドメイン」**という言葉について理解しましょう。ドメインとは、**ビジネスが解決しようとしている問題領域や知識の範囲**を指します。例えば、金融、医療、物流など、それぞれの業界やビジネス特有の専門知識やルールがあります。

### **3.2 ドメイン駆動設計の基本的な考え方**

- **ドメインモデルの構築**：
  - ビジネスの専門家（ドメインエキスパート）と開発者が協力して、ドメインの知識をソフトウェア上で表現する。
  - ドメインモデルは、ビジネスの概念やルールをオブジェクトとして定義し、その関係性や振る舞いを明確にする。
- **ユビキタス言語の使用**：
  - ドメインエキスパートと開発者の間で共通の言語（ユビキタス言語）を使用してコミュニケーションを図る。
  - モデルのクラス名やメソッド名にもユビキタス言語を反映させ、一貫性を持たせる。
- **境界づけられたコンテキスト**：
  - 大規模なシステムでは、ドメインを適切な境界で分割し、それぞれのコンテキストごとにモデルを定義する。
  - 各コンテキスト間の関係性を明確にし、依存関係を管理する。

### **3.3 DDDの主な要素**


1. **値オブジェクト（Value Object）**：
   - 不変の値を持ち、識別子を持たないオブジェクト。
   - 例：日付、金額、住所など。
2. **エンティティ（Entity）**：
   - 識別子によって区別され、同一性を持つオブジェクト。
   - 例：ユーザー、注文、商品など。
3. **集約（Aggregate）**：
   - 関連するエンティティや値オブジェクトの集合を一つの単位として扱う。
   - 集約ルートを通じて外部からの操作を制限する。
4. **リポジトリ（Repository）**：
   - 集約を永続化するためのインターフェースを提供。
   - データの保存や取得の詳細を隠蔽する。
5. **サービス（Domain Service）**：
   - エンティティや値オブジェクトに属さない、ドメインの操作を実装。
   - 主にビジネスロジックを含む。

## **4. ドメイン駆動設計のメリット**

### **4.1 ビジネスとの整合性**

ドメインモデルを構築することで、ビジネスの要件やルールがコードに直接反映されます。これにより、システムがビジネスと同じ言語で記述されるため、理解しやすくなります。

### **4.2 変更への柔軟性**

ビジネスは常に変化しますが、ドメイン駆動設計ではドメインモデル自体を改善・拡張することで、変更に柔軟に対応できます。

### **4.3 コードの再利用性と保守性の向上**

明確なモデル設計により、コードの再利用が促進され、保守性が向上します。各コンポーネントが役割に応じて適切に分離されているため、影響範囲を最小限に抑えることができます。

## **5. ドメイン駆動設計が生まれた理由**

### **5.1 ビジネスと技術のギャップの解消**

従来の開発手法では、ビジネス要件が技術的な実装にうまく反映されず、期待した成果が得られないことが多々ありました。ドメイン駆動設計は、このギャップを埋めるために生まれました。

### **5.2 複雑なドメインの管理**

ビジネスが複雑化する中で、その複雑性を適切に管理し、システムに反映する必要性が高まっていました。DDDは、複雑なドメインをモデル化し、その知識をソフトウェアに組み込む手法を提供します。

## **6. まとめ**

ドメイン駆動設計（DDD）は、ビジネスの本質を深く理解し、それをソフトウェアに反映させるための設計手法です。従来の設計手法が抱えていたビジネスとの乖離や複雑性の増大といった課題を克服し、より柔軟で保守性の高いシステムを構築することができます。
