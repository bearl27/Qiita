---
title: Gitコマンド：`git checkout`から`git switch`と`git restore`へ
tags:
  - Git
  - GitHub
  - 開発
  - チーム開発
private: false
updated_at: '2025-03-06T10:58:08+09:00'
id: 3aae2cb68a7dac773300
organization_url_name: rits-rcc
slide: false
ignorePublish: false
---
# はじめに
Gitは開発者にとって欠かせないバージョン管理ツールですが、その操作コマンドには多くの機能が詰まっています。特に`git checkout`はブランチの切り替えやファイルの復元など、多目的に使用されてきました。しかし、その多機能さゆえに動作が曖昧になりやすく、誤った操作を招く原因にもなっていました。

Git 2.23（2019年8月）以降、新しいコマンドである`git switch`と`git restore`が導入されました。これらのコマンドはそれぞれ特定の操作に特化しており、より直感的で安全なGit操作を実現します。本記事では、`git checkout`の問題点や新しいコマンドの使い方、そして`git checkout`を使わないべき理由について解説します。

## **`git checkout`：古い多目的コマンド**

`git checkout`は以下のような複数の機能を持つコマンドです。

- **ブランチの切り替え**
- **新規ブランチの作成**
- **ファイルの復元**
- **コミットのチェックアウト**

一つのコマンドで様々な操作が可能ですが、その反面、どの操作が実行されるのかがコマンドの書き方によって変わるため、動作が曖昧になりやすいという問題があります。特に初心者にとっては学習コストが高く、誤った操作によるトラブルも起きやすいです。

### **新しいコマンドの導入：`git switch`と`git restore`**

Git開発チームはこれらの問題を解決するため、操作を明確に分離した新しいコマンドを導入しました。

#### **`git switch`：ブランチ操作に特化**

`git switch`はブランチの切り替えや新規ブランチの作成に特化したコマンドです。

- **ブランチの切り替え**

  ```bash
  git switch ブランチ名
  ```
  
- **新規ブランチの作成と切り替え**

  ```bash
  git switch -c 新しいブランチ名
  ```

#### **`git restore`：ファイル操作に特化**

`git restore`はファイルの復元やステージングの解除に特化しています。

- **作業ディレクトリのファイル復元（変更内容を削除）**

  ```bash
  git restore ファイル名
  ```

  :::note
  Gitで追跡していないファイルを削除する場合
  **clean**コマンドを使う
    1. 削除されるファイルを確認
        ```bash
        git clean -n
        ```
    2. ファイルを削除する
        ```bash
        git clean -f
        ```
    3. ディレクトリを削除する
        ```bash
        git clean -d
    4. ファイルとディレクトリを削除する場合
        ```bash
        git clean -fd
        ```

bash

コピー
git clean -fd
  :::
  
- **ステージングの解除**

  ```bash
  git restore --staged ファイル名
  ```

### **具体的な使用例**

以下に`git checkout`と新しいコマンドの対応する使用例を示します。

#### **ブランチの切り替え**

```bash
# 従来の方法
git checkout develop

# 新しい方法
git switch develop
```

#### **新規ブランチの作成と切り替え**

```bash
# 従来の方法
git checkout -b feature

# 新しい方法
git switch -c feature
```

#### **ファイルの復元**

```bash
# 従来の方法
git checkout -- file.txt

# 新しい方法
git restore file.txt
```

### **`git checkout`を使わない理由**

#### **1. 動作の曖昧さを排除**

`git checkout`は一つのコマンドで複数の異なる操作を行うため、コマンドの意図が不明瞭になりやすいです。例えば、ブランチ名とファイル名が重複している場合、どちらを指しているのか混乱を招く可能性があります。`git switch`と`git restore`を使用することで、その操作がブランチに関するものかファイルに関するものかが明確になります。

#### **2. 学習コストの低減**

新しいコマンドはその名前から機能が直感的に理解できるため、Gitの学習コストを下げることができます。特に初心者にとって、操作を誤るリスクを減らし、安心してGitを活用できるようになります。

#### **4. 将来的なベストプラクティスへの適応**

Gitの開発者は、`git switch`と`git restore`の使用を推奨しています。これらのコマンドは今後も維持・改善が行われると考えられ、最新のベストプラクティスに従うことで、将来的な互換性やサポートを得やすくなります。

### **まとめ**
`git checkout`は長らくGitユーザーに利用されてきた多目的コマンドですが、その曖昧さや誤用のリスクから、`git switch`と`git restore`への移行が推奨されます。これらの新しいコマンドを使用することで、操作の意図が明確になり、誤った操作を防ぐことができます。Git 2.23以降を利用している場合は、ぜひ`git switch`と`git restore`を積極的に活用して、より効率的で安全なGit操作を実現しましょう。
